<h1 class="title text-center !pt-0">Change password</h1>

<form [formGroup]="form" (ngSubmit)="submit()"
    class="flex flex-col items-center gap-4">

    <div class="w-full">
        <label class="label" for="current-password">Current password</label>
        <input type="password" formControlName="currentPassword" id="current-password" class="input input-accent w-full" />
        @if(form.controls.currentPassword.hasError('required')) {
        <p class="text-accent text-sm">Current password is required</p>
        } @else if(form.controls.currentPassword.valid) {
        <p class="text-success text-sm">
            Current password ready
        </p>
        }
    </div>

    <div class="w-full">
        <label class="label" for="new-password">New password</label>
        <input type="password" formControlName="newPassword" id="new-password" class="input input-accent w-full" />
        @if(form.controls.newPassword.hasError('required')) {
        <p class="text-accent text-sm">New password is required</p>
        } @else if(
        form.controls.newPassword.hasError('minLength') ||
        form.controls.newPassword.hasError('uppercase') ||
        form.controls.newPassword.hasError('lowercase') ||
        form.controls.newPassword.hasError('number') ||
        form.controls.newPassword.hasError('specialChar')
        ) {
        <div class="text-accent text-sm">
            <b>New password must have:</b>
            <ul>
                <li>Minimum 6 characters</li>
                <li>At least one uppercase letter</li>
                <li>At least one lowercase letter</li>
                <li>At least one number</li>
                <li>At least one special character</li>
            </ul>
        </div>
        } @else if(form.controls.newPassword.hasError('valuesMismatch')){
        <div class="text-accent text-sm">
            Now repeat the new password...
        </div>
        } @else if(form.controls.newPassword.valid) {
        <p class="text-success text-sm">
            New password OK
        </p>
        }
    </div>

    <div class="w-full">
        <label class="label" for="new-password-repeat">Repeat new password</label>
        <input type="password" formControlName="newPasswordRepeat" id="new-password-repeat" class="input input-accent w-full" />
        @if (form.controls.newPassword.hasError('required')) {
        <p class="text-accent text-sm">
            New password is required
        </p>
        } @else if (form.controls.newPasswordRepeat.hasError('required')) {
        <p class="text-accent text-sm">
            Repeat new password is required
        </p>
        } @else if(form.controls.newPasswordRepeat.hasError('valuesMismatch')){
        <div class="text-error text-sm">
            New passwords do not match
        </div>
        } @else if(form.controls.newPasswordRepeat.valid) {
        <p class="text-success text-sm">
            New password repeat OK
        </p>
        }
    </div>

    <button type="submit" class="flex-none button button-lg button-primary button-rounded button-lg" [disabled]="!form.valid"
        [title]="'Save'">Save</button>
</form>